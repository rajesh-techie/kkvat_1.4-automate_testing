<div class="entity-page">
  <h2>Groups</h2>
  <form (ngSubmit)="save()" class="entity-form">
    <div class="form-row"><label>Name:</label><input [(ngModel)]="model.name" name="name" required /></div>
    <div class="form-row"><label>Description:</label><textarea [(ngModel)]="model.description" name="description"></textarea></div>
    <div class="form-row"><label>Active:</label><input type="checkbox" [(ngModel)]="model.isActive" name="isActive" /></div>
    <div class="form-row full-row">
      <button type="submit">{{ editingId ? 'Update' : 'Create' }}</button>
      <button type="button" *ngIf="editingId" (click)="cancelEdit()">Cancel</button>
    </div>
  </form>

  <div class="search-bar">
    <input [(ngModel)]="searchQuery" name="search" placeholder="Search by name or description" />
    <button type="button" (click)="search()">Search</button>
    <button type="button" (click)="clearSearch()">Clear</button>
  </div>

  <table>
    <thead><tr><th>Name</th><th>Description</th><th>Active</th><th></th></tr></thead>
    <tbody>
      <tr *ngFor="let g of groups">
        <td>{{g.name}}</td>
        <td>{{g.description}}</td>
        <td>{{g.isActive}}</td>
        <td>
          <button (click)="startEdit(g)">Edit</button>
          <button (click)="delete(g.id || g.ID)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="pagination" *ngIf="!isSearching && totalPages > 1">
    <button [disabled]="page <= 0" (click)="load(page - 1)">Previous</button>
    <button *ngFor="let p of [].constructor(totalPages); let i = index" [disabled]="i === page" (click)="load(i)">{{i + 1}}</button>
    <button [disabled]="page >= totalPages - 1" (click)="load(page + 1)">Next</button>
    <span class="pager-summary">Page {{page + 1}} of {{totalPages}} â€” Total: {{totalElements}}</span>
  </div>
</div>
